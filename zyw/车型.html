<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>

	<body>
		<div id="cx">
			<el-form :inline="true" :model="formInline" class="demo-form-inline">
				<el-form-item label="车型名称">
					<el-input v-model="formInline.ppname" placeholder="车型名称"></el-input>
				</el-form-item>
				<el-form-item>
					<el-button type="success" @click="onSubmit">查询</el-button>
				</el-form-item>
				<el-form-item>
					<el-button type="success" @click="insert">新增</el-button>
				</el-form-item>
			</el-form>
			<template>
				<el-table :data="tableData.list" style="width: 100%">
					<el-table-column prop="chexingid" label="车型ID" width="180">
					</el-table-column>
					<el-table-column prop="chexingname" label="车型名称" width="150">
					</el-table-column>
					<el-table-column prop="khclpp" label="车辆品牌名称" width="150">
					</el-table-column>
					<el-table-column prop="fdjpp" label="发动机品牌名称" width="180">
					</el-table-column>
					<el-table-column prop="chexingpice" label="参考价格" width="180">
					</el-table-column>
					<el-table-column prop="bz1" label="进口国产" width="180">
					</el-table-column>

					<el-table-column label="操作">
						<template slot-scope="temp">
							<el-button type="primary" icon="el-icon-edit" circle @click="xg(temp.row.clppid)"></el-button>
							<el-button type="danger" icon="el-icon-delete" circle @click="sc(temp.row.clppid)"></el-button>
						</template>
					</el-table-column>
				</el-table>
				<el-pagination style="padding-left: 250px;" @size-change="handleSizeChange" @current-change="handleCurrentChange" :current-page="tableData.pageNum" :page-sizes="[1,2,3]" :page-size="tableData.pageSize" layout="total, sizes, prev, pager, next, jumper" :total="tableData.total">
				</el-pagination>
					</el-dialog>
					
					<el-dialog title="新增" :visible.sync="dialogVisible" width="30%" :before-close="handleClose">
						<el-form ref="form" :model="chexing" label-width="100px">
							<el-form-item label="车型名称">
								<el-input v-model="chexing.clppname"></el-input>
							</el-form-item>
							<el-form-item label="车辆品牌"> 
							<el-select v-model="pp" placeholder="请选择">
    <el-option
      v-for="item in options"
      :key="item.value"
      :label="item.label"
      :value="item.value">
    </el-option>
  </el-select>
  </el-form-item>
							<el-form-item label="发动机品牌">
								<el-select v-model="fdj" placeholder="请选择">
								    <el-option
      v-for="item in fdjpp"
      :key="item.value"
      :label="item.label"
      :value="item.value">
    </el-option>
  </el-select>
  </el-form-item>
							</el-form-item>
							<el-form-item label="参考价格">
								<el-input v-model="chexing.clppszm"></el-input>
							</el-form-item>
							  <el-form-item label="产地">
    <el-select v-model="region" placeholder="请选择">
      <el-option label="进口" value="0" ></el-option>
      <el-option label="国产" value="1"></el-option>
    </el-select>
  </el-form-item>
						</el-form>
						<span slot="footer" class="dialog-footer">
    <el-button @click="dialogVisible = false">取 消</el-button>
    <el-button type="primary"  @click="ins">确 定</el-button>
  </span>
					</el-dialog>
			</template>

		</div>

		<script>
			new Vue({
				el: "#cx",
				data: {
					tableData: {},
					formInline: {},
					sizes: 3,
					pagen: 1,
					name:"",
					chexing:{},
					dialogVisible:false,
					options:[],
					pp:"",
					fdjpp:[],fdj:"",
					region:"0"
				},
				methods: {
					cha(i, f) {
						let _this = this;
						$.getJSON("http://127.0.0.1:9999/api/zyw/chexing?pageNum=" + i + "&size=" + f, function(it) {
							_this.tableData = it;
						})
					},insert(){
						this.dialogVisible=true;
					},ins(){
						
					},onSubmit(){},
					handleSizeChange(val) {
						this.sizes = val;
						console.log(`每页 ${val} 条`);
						this.cha(this.pagen, this.sizes);
					},
					handleCurrentChange(val) {
						this.pagen = val;
						this.cha(val, this.sizes);
						console.log(`当前页: ${val}`);
					},handleClose(done) {
        this.$confirm('确认关闭？')
          .then(_ => {
            done();
          })
          .catch(_ => {});
     }
				},
				mounted() {
					this.cha(this.pagen, this.sizes);
				}
			})
		</script>
	</body>

</html>